<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, user-scalable=no">
    <title>結帳頁面</title>
    <link rel="stylesheet" href="css/checkout.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Dela+Gothic+One&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Sawarabi+Mincho&display=swap" rel="stylesheet">
</head>
<body>
    <header>
        <div class="header-container">
            <nav class="nav-left">
                <a href="about.html">關於我們</a>
                <div class="dropdown">
                    <a href="#" class="dropdown-button" onclick="toggleDropdown()">商品分類 ▼</a>
                    <div id="dropdown-menu" class="dropdown-content">
                        <a href="project.html">所有商品</a>
                        <a href="food.html">古味食堂</a>
                        <a href="drinks.html">時光飲吧</a>
                        <a href="toys.html">童趣樂園</a>
                        <a href="supplies.html">懷舊良品</a>
                    </div>
                </div>
            </nav>
            <h1 class="store-name"><a href="index.html">胖呆雜貨店</a></h1>
            <div class="nav-right">
                <a href="member.html">會員中心 ｜</a>
                <a href="shoppingcart.html" class="cart">🛒 購物車</a>
            </div>
        </div>
    </header>

    <!-- ... head 區保持不變 ... -->
<main>
  <div class="container">
    <div class="left">
      <div class="recipient-info">
        <h2>收件人資訊</h2>
        <div id="auth-container"></div>
      </div>
      <div class="order-confirm">
        <h2>確認訂單</h2>
        <div id="order-confirmation-items"></div>
      </div>
    </div>

    <div class="right">
      <h2>訂單費用</h2>
      <div class="order-summary">
        <p>小計: NT$<span id="subtotal">0</span></p>
        <p>運費: NT$<span id="shipping-fee">0</span></p>
        <p>總金額: NT$<span id="total">0</span></p>
      </div>

      <h2>支付方式</h2>
      <form id="payment-form" action="/myjsp/sec/submitOrder.jsp" method="POST">
        <!-- ✅ 隱藏欄位：會員資料 -->
        <input type="hidden" id="member-name" name="user_name">
        <input type="hidden" id="member-phone" name="user_phone">
        <input type="hidden" id="member-address" name="user_address">
        <input type="hidden" id="member-email" name="user_email">

        <!-- ✅ 隱藏欄位：訂單金額 -->
        <input type="hidden" id="subtotal-input" name="subtotal">
        <input type="hidden" id="shipping-fee-input" name="shipping_fee">
        <input type="hidden" id="total-input" name="total">

        <!-- ✅ 多商品資料：由 JS 動態加入 input -->
        <div id="cart-hidden-fields"></div>

        <label>
          <input type="radio" name="payment" value="credit-card" required>
          信用卡
        </label>
        <div id="credit-card-fields" style="display: none;">
          <label for="card-number">卡號</label>
          <input type="text" id="card-number" name="card_number" placeholder="1234 5678 9012 3456" pattern="\d{4} \d{4} \d{4} \d{4}" title="請輸入有效的卡號">
          <label for="expiry-date">到期日</label>
          <input type="text" id="expiry-date" name="expiry_date" placeholder="MM/YY" pattern="(0[1-9]|1[0-2])\/\d{2}" title="請輸入有效的到期日">
          <label for="cvv">CVV</label>
          <input type="text" id="cvv" name="cvv" placeholder="123" pattern="\d{3}" title="請輸入有效的CVV">
        </div>
        <label>
          <input type="radio" name="payment" value="cash-on-delivery">
          貨到付款
        </label>

        <button type="submit">結帳</button>
      </form>
    </div>
  </div>

  <div id="custom-alert">
    <div class="alert-box">
      <p id="alert-message"></p>
      <button>確定</button>
    </div>
  </div>
</main>


    <footer>
        <div class="footer-container">
            <div class="footer-item">
                <img src="image/photo13.jpg" height="100px" width="150px">
                <div class="text-container">
                    <p>𖥠 中原大學資管系</p>
                    <p>☼ 全日公休（食物被代言人吃完 補貨中~_~）</p>
                    <p>☏ 0959277777(我就愛吃吃吃吃吃)</p>
                    <p>✉ pdhjzhd@gmail.com</p>
                </div>
            </div>
        </div>
        <div class="footer-bottom">
            <p>@2024 胖呆懷舊雜貨店</p>
        </div>
    </footer>

    <script src="js/checkout.js"></script>
</body>
</html>